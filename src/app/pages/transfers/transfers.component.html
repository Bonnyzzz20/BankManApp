<div class="container page-container">
  <header class="page-header">
    <h1>Nuovo Bonifico</h1>
    <p>Invia denaro in sicurezza verso qualsiasi IBAN area SEPA.</p>
  </header>

  <div class="transfers-layout">
    
    <!-- Transfer Form -->
    <section class="transfer-panel glass-panel">
      <h2>Dettagli Bonifico</h2>
      <form (ngSubmit)="onsubmit()" #transferForm="ngForm">
        
        <div class="form-group">
          <label for="beneficiary">Intestatario</label>
          <input type="text" id="beneficiary" name="beneficiary" 
                 [(ngModel)]="transferData.beneficiary" 
                 placeholder="Es. Mario Rossi" required>
        </div>

        <div class="form-group">
          <label for="iban">IBAN</label>
          <input type="text" id="iban" name="iban" 
                 [(ngModel)]="transferData.iban" 
                 placeholder="IT00 X..." required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="amount">Importo (‚Ç¨)</label>
            <input type="number" id="amount" name="amount" 
                   [(ngModel)]="transferData.amount" 
                   placeholder="0.00" min="0.01" required>
          </div>
          
          <div class="form-group">
            <label for="reason">Causale</label>
            <input type="text" id="reason" name="reason" 
                   [(ngModel)]="transferData.reason" 
                   placeholder="Es. Regalo">
          </div>
        </div>

        <div class="form-actions">
          <app-button label="Esegui Bonifico" variant="primary" type="submit" 
                     [disabled]="!transferForm.form.valid"></app-button>
        </div>

      </form>
    </section>

    <!-- Recent History -->
    <section class="history-panel glass-panel">
      <h2>Ultimi Bonifici</h2>
      
      <div class="history-list">
        @for (tx of recentTransfers; track tx.id) {
          <div class="history-item">
            <div class="history-icon">üí∏</div>
            <div class="history-details">
              <h4>{{ tx.beneficiary }}</h4>
              <span class="date">{{ tx.date }}</span>
            </div>
            <div class="history-status" [class.pending]="tx.status === 'pending'">
              {{ tx.status === 'pending' ? '‚è≥' : '‚úÖ' }}
            </div>
            <div class="history-amount">
              -{{ tx.amount | currency:'EUR' }}
            </div>
          </div>
        } @empty {
          <p class="empty-msg">Nessun bonifico recente.</p>
        }
      </div>
    </section>

  </div>
</div>
